-- MỞ CSDL MASTER
USE MASTER
GO
-- Xóa database
DROP DATABASE QUANLYKHOA
GO
-- Tạo database
CREATE DATABASE QUANLYKHOA
GO
--Mở CSDL QUANLYKHOA
USE QUANLYKHOA
GO
-- 1. Tạo bảng KHOA
--    DROP TABLE KHOA
	CREATE TABLE KHOA
	(
			MAKHOA				VARCHAR(5) PRIMARY KEY,
			TENKHOA				NVARCHAR(50)
			
	)
-- Nhập dữ liệu cho bảng KHOA
INSERT INTO KHOA(MAKHOA, TENKHOA) 
VALUES('IT', N'Công nghệ thông tin')

INSERT INTO KHOA(MAKHOA, TENKHOA) 
VALUES('KT', N'Kế toán')

INSERT INTO KHOA(MAKHOA, TENKHOA) 
VALUES('AE', N'Ô tô')

GO
-- hiển thị dữ liệu
SELECT * FROM KHOA
-- 2. Tạo bảng GIAOVIEN
	CREATE TABLE GIAOVIEN
	(
			MAGV					VARCHAR(5) PRIMARY KEY,
			HOLOT            NVARCHAR(50),
			TEN        Nvarchar(20),
			NGAYSINH			DATETIME,
			GIOITINH    BIT,
			HSL    FLOAT,
			NGAYHOCTAC DATETIME,
			MAKHOA				VARCHAR(5) FOREIGN KEY REFERENCES KHOA(MAKHOA)
	)

-- Nhập dữ liệu
insert into GIAOVIEN(MAGV, HOLOT, TEN, NGAYSINH, GIOITINH,HSL,NGAYHOCTAC,MAKHOA)
values('001',N'Nguyễn Quốc ','Vương', '1988/08/09', '1', '2.3','2000/12/23',  'IT')

insert into GIAOVIEN(MAGV, HOLOT, TEN, NGAYSINH, GIOITINH,HSL,NGAYHOCTAC , MAKHOA)
values('002',N'Lê Phúc','Thành', '1997/10/09','1',  '3.4','2000/09/22', 'IT')

insert into GIAOVIEN(MAGV, HOLOT, TEN, NGAYSINH, GIOITINH,HSL,NGAYHOCTAC, MAKHOA)
values('003',N'Nguyen Thị','Tú', '1991/12/08', '0','4.1', '2000/08/21', 'IT')
GO
-- hiển thị dữ liệu
select * from GIAOVIEN

--tạo bảng LOP
create table LOP
(
MALOP VARCHAR(5) PRIMARY KEY,
KHOAHOC NVARCHAR(30),
TENLOP NVARCHAR(20),
MAKHOA VARCHAR(5) FOREIGN KEY REFERENCES KHOA(MAKHOA)
)
--Nhap du lieu vo
insert into LOP(MALOP,KHOAHOC,TENLOP,MAKHOA)
VALUES('IT001',N'2021-2025',N'IT21A1A','IT')

insert into LOP(MALOP,KHOAHOC,TENLOP,MAKHOA)
VALUES('IT002',N'2021-2025',N'IT21A1B','IT')
insert into LOP(MALOP,KHOAHOC,TENLOP,MAKHOA)
VALUES('IT003',N'2021-2025',N'IT21A2A','IT')
--HIEN THI BANG LOP
SELECT*FROM LOP

--TAO BANG MONHOC
CREATE TABLE MONHOC
(
MAMH VARCHAR(10)PRIMARY KEY,
TENMH NVARCHAR(30),
TINCHI VARCHAR(5),
)
--NHAPDL 
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('PLDC',N'Pháp luật đại cương	','3')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('NN',N'Ngoại ngữ','3')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('KTLT',N'Kỹ thuật lập trình','3')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('THVP',N'Tin học văn phòng','3')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('HQTCSDL',N'Hệ quản trị cơ sở dữ liệu','2')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('CSDL',N'Cơ sở dữ liệu','2')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('PTTKHT',N'Phân tích thiết kế hệ thống','2')
--hienthi bang MONHOC
SELECT * FROM MONHOC

--DROP TABLE SINHVIEN
--TAO BANG SINHVIEN
CREATE TABLE SINHVIEN
(
MASV VARCHAR(5) PRIMARY KEY,
HOLOT NVARCHAR(20),
TEN NVARCHAR(20),
NGAYSINH DATETIME,
GIOITINH BIT,
DIENTHOAI nvarchar(20),
DIACHI NVARCHAR(40),
MALOP VARCHAR(5) FOREIGN KEY REFERENCES LOP(MALOP)
)
--NHAP DL
INSERT INTO SINHVIEN(MASV,HOLOT,TEN,NGAYSINH,GIOITINH,DIENTHOAI,DIACHI,MALOP)
VALUES('SV001',N'LÊ VĂN',N'CƯỜNG','2003/10/21','1','905123123',N'Đà Nẵng','IT001')
INSERT INTO SINHVIEN(MASV,HOLOT,TEN,NGAYSINH,GIOITINH,DIENTHOAI,DIACHI,MALOP)
VALUES('SV002',N'LÊ CƯỜNG',N'THỊNH','2003/09/22','1','905123124','Lý Sơn','IT001')
INSERT INTO SINHVIEN(MASV,HOLOT,TEN,NGAYSINH,GIOITINH,DIENTHOAI,DIACHI,MALOP)
VALUES('SV003',N'ĐINH QUỐC','KHÁNH','2003/12/24','1','905123125','Quảng Ngãi','IT002')
INSERT INTO SINHVIEN(MASV,HOLOT,TEN,NGAYSINH,GIOITINH,DIENTHOAI,DIACHI,MALOP)
VALUES('SV004',N'NUYỄN THỊ THÙY','LINH','2002/12/24','0','905123126','Quảng Trị','IT002')
INSERT INTO SINHVIEN(MASV,HOLOT,TEN,NGAYSINH,GIOITINH,DIENTHOAI,DIACHI,MALOP)
VALUES('SV005',N'LÊ HOÀI',N'AN','2003/12/12','1','905123127','Nghệ An','IT003')
INSERT INTO SINHVIEN(MASV,HOLOT,TEN,NGAYSINH,GIOITINH,DIENTHOAI,DIACHI,MALOP)
VALUES('SV006',N'Nguyễn THỊ VIẾT',N'NHẬT','2002/10/22','0','905123128','Lý Sơn','IT003')
--HIEN THI BANG SINHVIEN
SELECT*FROM SINHVIEN

--DROP TABLE GIANGDAY
--TAO BANG DAY
CREATE TABLE GIANGDAY
(
MAGV VARCHAR(5) FOREIGN KEY REFERENCES GIAOVIEN(MAGV),
MAMH VARCHAR(10) FOREIGN KEY REFERENCES MONHOC(MAMH),
MALOP VARCHAR(5) FOREIGN KEY REFERENCES LOP(MALOP),
SOTIET VARCHAR(10),
HOCKY VARCHAR(5),
NAMHOC NVARCHAR(20)
PRIMARY KEY (MAGV,MAMH,MALOP)
)
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','HQTCSDL','IT001','30','1','2021-2022')
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','CSDL','IT001','15','2','2021-2022')
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','PTTKHT','IT001','60','1','2021-2022')
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','HQTCSDL','IT002','45','2','2021-2022')
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','CSDL','IT002','15','1','2021-2022')
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','PTTKHT','IT002','60','2','2021-2022')
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','HQTCSDL','IT003','45','1','2021-2022')
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','CSDL','IT003','15','2','2021-2022')
INSERT INTO GIANGDAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','PTTKHT','IT003','60','1','2021-2022')
--HIENTHI BANG DAY
SELECT*FROM GIANGDAY

--DROP TABLE DIEM
--TAO BANG DIEM
CREATE TABLE DIEM
(
MASV VARCHAR(5) FOREIGN KEY REFERENCES SINHVIEN(MASV),
MAMH VARCHAR(10) FOREIGN KEY REFERENCES MONHOC(MAMH),
DIEMCHUYENCAN FLOAT,
DIEMTHUONGXUYEN FLOAT,
DIEMGIUAKI FLOAT,
DIEMLAN1 FLOAT(5),
DIEMLAN2 FLOAT(5),
PRIMARY KEY (MASV,MAMH)
)
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV001','HQTCSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV002','HQTCSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV003','HQTCSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV004','HQTCSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV005','HQTCSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV006','HQTCSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV001','CSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV002','CSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV003','CSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV004','CSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV005','CSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV006','CSDL','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV001','PTTKHT','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV002','PTTKHT','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV003','PTTKHT','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV004','PTTKHT','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV005','PTTKHT','','','','','')
INSERT INTO DIEM(MASV,MAMH,DIEMCHUYENCAN,DIEMTHUONGXUYEN,DIEMGIUAKI,DIEMLAN1,DIEMLAN2)
VALUES('SV006','PTTKHT','','','','','')
--HIEN THI BANG DIEM
SELECT*FROM DIEM




