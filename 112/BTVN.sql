-- MỞ CSDL MASTER
USE MASTER
GO
-- Xóa database
DROP DATABASE QUANLYKHOA
GO
-- Tạo database
CREATE DATABASE QUANLYKHOA
GO
--Mở CSDL QUANLYKHOA
USE QUANLYKHOA
GO
-- 1. Tạo bảng KHOA
--    DROP TABLE KHOA
	CREATE TABLE KHOA
	(
			MAKHOA				VARCHAR(5) PRIMARY KEY,
			TENKHOA				NVARCHAR(50),
			TRUONGKHOA	NVARCHAR(50),
			DIENTHOAI			VARCHAR(15),
			DIACHI NVARCHAR(30)
	)
-- Nhập dữ liệu cho bảng KHOA
INSERT INTO KHOA(MAKHOA, TENKHOA, TRUONGKHOA, DIENTHOAI,DIACHI) 
VALUES('IT', N'Công nghệ thông tin', N'Trần Bình', '3402374',N'706')

INSERT INTO KHOA(MAKHOA, TENKHOA, TRUONGKHOA, DIENTHOAI,DIACHI) 
VALUES('KT', N'Kế toán', N'Lê Ánh', '3402304',N'306')

INSERT INTO KHOA(MAKHOA, TENKHOA, TRUONGKHOA, DIENTHOAI,DIACHI) 
VALUES('AE', N'Ô tô', N'Nguyễn Tuấnh', '3402354',N'702')


-- hiển thị dữ liệu
SELECT * FROM KHOA
-- 2. Tạo bảng GIAOVIEN
	CREATE TABLE GIAOVIEN
	(
			MAGV					VARCHAR(5) PRIMARY KEY,
			HOTENGV				NVARCHAR(50),
			NGAYSINH			DATETIME,
			TRINHDO				NVARCHAR(50),
			DIENTHOAI			VARCHAR(15),
			DIACHI					NVARCHAR(100),
			NGAYLAMVIEC  DATETIME,
			MAKHOA				VARCHAR(5) FOREIGN KEY REFERENCES KHOA(MAKHOA)
	)
GO
-- Nhập dữ liệu
insert into GIAOVIEN(MAGV, HOTENGV, NGAYSINH, TRINHDO, DIENTHOAI, DIACHI, NGAYLAMVIEC, MAKHOA)
values('001',N'Nguyễn Quốc Vương', '1988/08/09', N'Thạc sỹ', '1232434', N'Đà Nẵng', '11/1/2021', 'IT')

insert into GIAOVIEN(MAGV, HOTENGV, NGAYSINH, TRINHDO, DIENTHOAI, DIACHI, NGAYLAMVIEC, MAKHOA)
values('002',N'B', '1997/10/09', N'Thạc sỹ', '12434', N'Đà Nẵng', '11/1/2021', 'IT')

insert into GIAOVIEN(MAGV, HOTENGV, NGAYSINH, TRINHDO, DIENTHOAI, DIACHI, NGAYLAMVIEC, MAKHOA)
values('003',N'C', '1991/12/08', N'Thạc sỹ', '324234', N'Đà Nẵng', '11/1/2021', 'IT')
GO
-- hiển thị dữ liệu
select * from GIAOVIEN

--tạo bảng LOP
create table LOP
(
MALOP VARCHAR(5) PRIMARY KEY,
TENLOP NVARCHAR(20),
MAKHOA VARCHAR(5) FOREIGN KEY REFERENCES KHOA(MAKHOA)
)
--Nhap du lieu vo
insert into LOP(MALOP,TENLOP,MAKHOA)
VALUES('IT001',N'IT21A1A','IT')
insert into LOP(MALOP,TENLOP,MAKHOA)
VALUES('IT002',N'IT21A1B','IT')
insert into LOP(MALOP,TENLOP,MAKHOA)
VALUES('IT003',N'IT21A2A','IT')
--HIEN THI BANG LOP
SELECT*FROM LOP

--TAO BANG MONHOC
CREATE TABLE MONHOC
(
MAMH VARCHAR(10)PRIMARY KEY,
TENMH NVARCHAR(30),
TINCHI VARCHAR(5),
)
--NHAPDL 
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('PLDC',N'Pháp luật đại cương	','3')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('NN',N'Ngoại ngữ','3')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('KTLT',N'Kỹ thuật lập trình','3')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('THVP',N'Tin học văn phòng','3')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('HQTCSDL',N'Hệ quản trị cơ sở dữ liệu','2')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('CSDL',N'Cơ sở dữ liệu','2')
INSERT INTO MONHOC(MAMH,TENMH,TINCHI)
VALUES('PTTKHT',N'Phân tích thiết kế hệ thống','2')
--hienthi bang MONHOC
SELECT * FROM MONHOC

--TAO BANG SINHVIEN
CREATE TABLE SINHVIEN
(
MASV VARCHAR(5) PRIMARY KEY,
HOTEN NVARCHAR(20),
DIENTHOAI VARCHAR(15),
MALOP VARCHAR(5) FOREIGN KEY REFERENCES LOP(MALOP)
)
--NHAP DL
INSERT INTO SINHVIEN(MASV,HOTEN,DIENTHOAI,MALOP)
VALUES('SV001',N'NGUYỄN CẢNH','905123123','IT001')
INSERT INTO SINHVIEN(MASV,HOTEN,DIENTHOAI,MALOP)
VALUES('SV002',N'LÊ CƯỜNG','905123124','IT001')
INSERT INTO SINHVIEN(MASV,HOTEN,DIENTHOAI,MALOP)
VALUES('SV003',N'HỮU THINH','905123125','IT002')
INSERT INTO SINHVIEN(MASV,HOTEN,DIENTHOAI,MALOP)
VALUES('SV004',N'VIẾT TRƯỜNG','905123126','IT002')
INSERT INTO SINHVIEN(MASV,HOTEN,DIENTHOAI,MALOP)
VALUES('SV005',N'XUÂN TIÊN','905123127','IT003')
INSERT INTO SINHVIEN(MASV,HOTEN,DIENTHOAI,MALOP)
VALUES('SV006',N'Nguyễn Viết Nhật','905123128','IT003')
--HIEN THI BANG SINHVIEN
SELECT*FROM SINHVIEN

--TAO BANG DAY
CREATE TABLE DAY
(
MAGV VARCHAR(5) FOREIGN KEY REFERENCES GIAOVIEN(MAGV),
MAMH VARCHAR(10) FOREIGN KEY REFERENCES MONHOC(MAMH),
MALOP VARCHAR(5) FOREIGN KEY REFERENCES LOP(MALOP),
SOTIET VARCHAR(10),
HOCKY VARCHAR(5),
NAMHOC NVARCHAR(20)
PRIMARY KEY (MAGV,MAMH,MALOP)
)
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','HQTCSDL','IT001','45','1','2021-2022')
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','CSDL','IT001','15','2','2021-2022')
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','PTTKHT','IT001','60','1','2021-2022')
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','HQTCSDL','IT002','45','2','2021-2022')
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','CSDL','IT002','15','1','2021-2022')
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','PTTKHT','IT002','60','2','2021-2022')
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','HQTCSDL','IT003','45','1','2021-2022')
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','CSDL','IT003','15','2','2021-2022')
INSERT INTO DAY(MAGV,MAMH,MALOP,SOTIET,HOCKY,NAMHOC)
VALUES('001','PTTKHT','IT003','60','1','2021-2022')
--HIENTHI BANG DAY
SELECT*FROM DAY

--TAO BANG THI
CREATE TABLE THI
(
MASV VARCHAR(5) FOREIGN KEY REFERENCES SINHVIEN(MASV),
MAMH VARCHAR(10) FOREIGN KEY REFERENCES MONHOC(MAMH),
DIEMLAN1 FLOAT(5),
DIEMLAN2 FLOAT(5),
PRIMARY KEY (MASV,MAMH)
)
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV001','HQTCSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV002','HQTCSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV003','HQTCSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV004','HQTCSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV005','HQTCSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV006','HQTCSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV001','CSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV002','CSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV003','CSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV004','CSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV005','CSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV006','CSDL','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV001','PTTKHT','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV002','PTTKHT','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV003','PTTKHT','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV004','PTTKHT','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV005','PTTKHT','','')
INSERT INTO THI(MASV,MAMH,DIEMLAN1,DIEMLAN2)
VALUES('SV006','PTTKHT','','')
--HIEN THI BANG THI
SELECT*FROM THI

select *from DAY
select *from GIAOVIEN
select *from KHOA
select *from LOP
select *from MONHOC
select *from SINHVIEN
select *from THI





